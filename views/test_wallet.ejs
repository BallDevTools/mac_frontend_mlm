<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Interact with Contract</title>
    <script src="https://cdn.jsdelivr.net/npm/web3@1.3.0/dist/web3.min.js"></script>
</head>
<body>
    <input type="text" id="inputValue" placeholder="Enter value here">
    <button onclick="sendTransaction()">Send Transaction</button>


    <script>
        async function sendTransaction() {
    if (typeof window.ethereum !== 'undefined') {
        // Request account access if necessary
        await window.ethereum.request({ method: 'eth_requestAccounts' });

        // Create a new Web3 instance
        const web3 = new Web3(window.ethereum);
        const contractABI = `<%- contractABI %>`; // Contract ABI
        const contractAddress = `<%- contractAddress %>`; // Contract address on the blockchain
        const contract = new web3.eth.Contract(contractABI, contractAddress);
        const accounts = await web3.eth.getAccounts();
        const fromAccount = accounts[0];

        // Gather inputs from the user
        const inputValue = document.getElementById('inputValue').value;

        // const txObject = {
        //     from: fromAddress,
        //     to: toAddress,
        //     value: amountInWei,
        //     data: web3.utils.toHex(data),
        //     gas: '21000',
        // };
        // web3.eth.sendTransaction(txObject)
        // .then((txHash) => {
        //     console.log('Transaction Hash:', txHash);
        // })
        // .catch((error) => {
        //     console.error('Error:', error);
        // });
        const txObject = {
            from: fromAccount,
            gasLimit: web3.utils.toHex(800000), // Raise the gas limit to an appropriate amount
            value: web3.utils.toHex(web3.utils.toWei('0.1', 'ether')) // Convert 0.1 ETH to Wei
        };

        // Call the contract function with parameters
        contract.methods.setValue(inputValue).send(txObject)
        .then((receipt) => {
            console.log('Transaction successful:', receipt);
        })
        .catch((error) => {
            console.error('Transaction failed:', error);
        });
    } else {
        console.log('Please install MetaMask to interact with Ethereum.');
    }
}

    </script>
</body>
</html>